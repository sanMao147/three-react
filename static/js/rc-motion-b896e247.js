import{e,d as n,b as t,f as r,k as a,l as o,a as i,_ as c,m as u,h as s,g as f}from"./@babel-ebff8eee.js";import{c as l,h as v,p as d,q as m,s as p,v as E}from"./rc-util-1ed7d15f.js";import{c as y}from"./classnames-6d47fc8c.js";function R(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var h,k,b,L=(h=l(),k="undefined"!=typeof window?window:{},b={animationend:R("Animation","AnimationEnd"),transitionend:R("Transition","TransitionEnd")},h&&("AnimationEvent"in k||delete b.animationend.animation,"TransitionEvent"in k||delete b.transitionend.transition),b),A={};if(l()){var g=document.createElement("div");A=g.style}var C={};function w(e){if(C[e])return C[e];var n=L[e];if(n)for(var t=Object.keys(n),r=t.length,a=0;a<r;a+=1){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&o in A)return C[e]=n[o],C[e]}return""}var S=w("animationend"),P=w("transitionend"),j=!(!S||!P),N=S||"animationend",O=P||"transitionend";function T(n,t){return n?"object"===e(n)?n[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(n,"-").concat(t):null}var M="none",V="appear",D="enter",x="leave",z="none",F="prepare",I="start",K="active",q="end",H=l()?React.useLayoutEffect:React.useEffect,U=[F,I,K,q];function W(e){return e===K||e===q}var _=function(e){a(t,e);var n=o(t);function t(){return i(this,t),n.apply(this,arguments)}return c(t,[{key:"render",value:function(){return this.props.children}}]),t}(React.Component);const B=function(a){var o=a;function i(e){return!(!e.motionName||!o)}"object"===e(a)&&(o=a.transitionSupport);var c=React.forwardRef((function(e,a){var o=e.visible,c=void 0===o||o,u=e.removeOnLeave,s=void 0===u||u,f=e.forceRender,l=e.children,R=e.motionName,h=e.leavedClassName,k=e.eventProps,b=i(e),L=React.useRef(),A=React.useRef(),g=function(e,a,o,i){var c=i.motionEnter,u=void 0===c||c,s=i.motionAppear,f=void 0===s||s,l=i.motionLeave,m=void 0===l||l,p=i.motionDeadline,y=i.motionLeaveImmediately,R=i.onAppearPrepare,h=i.onEnterPrepare,k=i.onLeavePrepare,b=i.onAppearStart,g=i.onEnterStart,C=i.onLeaveStart,w=i.onAppearActive,S=i.onEnterActive,P=i.onLeaveActive,j=i.onAppearEnd,T=i.onEnterEnd,_=i.onLeaveEnd,B=i.onVisibleChanged,G=d(),J=n(G,2),Q=J[0],X=J[1],Y=d(M),Z=n(Y,2),$=Z[0],ee=Z[1],ne=d(null),te=n(ne,2),re=te[0],ae=te[1],oe=React.useRef(!1),ie=React.useRef(null);function ce(){return function(){try{return L.current instanceof HTMLElement?L.current:E(A.current)}catch(e){return null}}()}var ue=React.useRef(!1);function se(e){var n=ce();if(!e||e.deadline||e.target===n){var t,r=ue.current;$===V&&r?t=null==j?void 0:j(n,e):$===D&&r?t=null==T?void 0:T(n,e):$===x&&r&&(t=null==_?void 0:_(n,e)),$!==M&&r&&!1!==t&&(ee(M,!0),ae(null,!0))}}var fe=function(e){var n=React.useRef(),t=React.useRef(e);t.current=e;var r=React.useCallback((function(e){t.current(e)}),[]);function a(e){e&&(e.removeEventListener(O,r),e.removeEventListener(N,r))}return React.useEffect((function(){return function(){a(n.current)}}),[]),[function(e){n.current&&n.current!==e&&a(n.current),e&&e!==n.current&&(e.addEventListener(O,r),e.addEventListener(N,r),n.current=e)},a]}(se),le=n(fe,1)[0],ve=React.useMemo((function(){var e,n,r;switch($){case V:return t(e={},F,R),t(e,I,b),t(e,K,w),e;case D:return t(n={},F,h),t(n,I,g),t(n,K,S),n;case x:return t(r={},F,k),t(r,I,C),t(r,K,P),r;default:return{}}}),[$]),de=function(e,t){var r=d(z),a=n(r,2),o=a[0],i=a[1],c=function(){var e=React.useRef(null);function n(){v.cancel(e.current)}return React.useEffect((function(){return function(){n()}}),[]),[function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=v((function(){a<=1?r({isCanceled:function(){return o!==e.current}}):t(r,a-1)}));e.current=o},n]}(),u=n(c,2),s=u[0],f=u[1];return H((function(){if(o!==z&&o!==q){var e=U.indexOf(o),n=U[e+1],r=t(o);!1===r?i(n,!0):s((function(e){function t(){e.isCanceled()||i(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),React.useEffect((function(){return function(){f()}}),[]),[function(){i(F,!0)},o]}($,(function(e){if(e===F){var n=ve[F];return!!n&&n(ce())}var t;return Ee in ve&&ae((null===(t=ve[Ee])||void 0===t?void 0:t.call(ve,ce(),null))||null),Ee===K&&(le(ce()),p>0&&(clearTimeout(ie.current),ie.current=setTimeout((function(){se({deadline:!0})}),p))),true})),me=n(de,2),pe=me[0],Ee=me[1],ye=W(Ee);ue.current=ye,H((function(){X(a);var n,t=oe.current;oe.current=!0,e&&(!t&&a&&f&&(n=V),t&&a&&u&&(n=D),(t&&!a&&m||!t&&y&&!a&&m)&&(n=x),n&&(ee(n),pe()))}),[a]),React.useEffect((function(){($===V&&!f||$===D&&!u||$===x&&!m)&&ee(M)}),[f,u,m]),React.useEffect((function(){return function(){oe.current=!1,clearTimeout(ie.current)}}),[]);var Re=React.useRef(!1);React.useEffect((function(){Q&&(Re.current=!0),void 0!==Q&&$===M&&((Re.current||Q)&&(null==B||B(Q)),Re.current=!0)}),[Q,$]);var he=re;return ve[F]&&Ee===I&&(he=r({transition:"none"},he)),[$,Ee,he,null!=Q?Q:a]}(b,c,0,e),C=n(g,4),w=C[0],S=C[1],P=C[2],j=C[3],B=React.useRef(j);j&&(B.current=!0);var G,J=React.useCallback((function(e){L.current=e,m(a,e)}),[a]),Q=r(r({},k),{},{visible:c});if(l)if(w!==M&&i(e)){var X,Y;S===F?Y="prepare":W(S)?Y="active":S===I&&(Y="start"),G=l(r(r({},Q),{},{className:y(T(R,w),(X={},t(X,T(R,"".concat(w,"-").concat(Y)),Y),t(X,R,"string"==typeof R),X)),style:P}),J)}else G=j?l(r({},Q),J):!s&&B.current&&h?l(r(r({},Q),{},{className:h}),J):f||!s&&!h?l(r(r({},Q),{},{style:{display:"none"}}),J):null;else G=null;return React.isValidElement(G)&&p(G)&&(G.ref||(G=React.cloneElement(G,{ref:J}))),React.createElement(_,{ref:A},G)}));return c.displayName="CSSMotion",c}(j);var G="add",J="keep",Q="remove",X="removed";function Y(n){var t;return t=n&&"object"===e(n)&&"key"in n?n:{key:n},r(r({},t),{},{key:String(t.key)})}function Z(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Y)}var $=["component","children","onVisibleChanged","onAllRemoved"],ee=["status"],ne=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,l=function(e){a(v,e);var l=o(v);function v(){var e;i(this,v);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=l.call.apply(l,[this].concat(a)),t(u(e),"state",{keyEntities:[]}),t(u(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:r(r({},e),{},{status:X})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==X})).length})),e}return c(v,[{key:"render",value:function(){var e=this,t=this.state.keyEntities,r=this.props,a=r.component,o=r.children,i=r.onVisibleChanged,c=r.onAllRemoved,u=s(r,$),l=a||React.Fragment,v={};return ne.forEach((function(e){v[e]=u[e],delete u[e]})),delete u.keys,React.createElement(l,u,t.map((function(t){var r=t.status,a=s(t,ee),u=r===G||r===J;return React.createElement(n,f({},v,{key:a.key,visible:u,eventProps:a,onVisibleChanged:function(n){null==i||i(n,{key:a.key}),n||0===e.removeKey(a.key)&&c&&c()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,a=n.keyEntities,o=Z(t),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],a=0,o=n.length,i=Z(e),c=Z(n);i.forEach((function(e){for(var n=!1,i=a;i<o;i+=1){var u=c[i];if(u.key===e.key){a<i&&(t=t.concat(c.slice(a,i).map((function(e){return r(r({},e),{},{status:G})}))),a=i),t.push(r(r({},u),{},{status:J})),a+=1,n=!0;break}}n||t.push(r(r({},e),{},{status:Q}))})),a<o&&(t=t.concat(c.slice(a).map((function(e){return r(r({},e),{},{status:G})}))));var u={};return t.forEach((function(e){var n=e.key;u[n]=(u[n]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==Q}))).forEach((function(n){n.key===e&&(n.status=J)}))})),t}(a,o);return{keyEntities:i.filter((function(e){var n=a.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==X||e.status!==Q}))}}}]),v}(React.Component);t(l,"defaultProps",{component:"div"})}(j);export{B as C};
