import{e,d as n,b as t,f as r,k as o,l as a,a as i,_ as u,m as c,h as s,g as f}from"./@babel-ebff8eee.js";import{r as l}from"./react-aa034a1c.js";import{c as v,h as d,p as m,q as p,s as E,v as y}from"./rc-util-fd3bf20b.js";import{c as h}from"./classnames-46b2866a.js";function k(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var b,L,A,g=(b=v(),L="undefined"!=typeof window?window:{},A={animationend:k("Animation","AnimationEnd"),transitionend:k("Transition","TransitionEnd")},b&&("AnimationEvent"in L||delete A.animationend.animation,"TransitionEvent"in L||delete A.transitionend.transition),A),C={};if(v()){var R=document.createElement("div");C=R.style}var w={};function S(e){if(w[e])return w[e];var n=g[e];if(n)for(var t=Object.keys(n),r=t.length,o=0;o<r;o+=1){var a=t[o];if(Object.prototype.hasOwnProperty.call(n,a)&&a in C)return w[e]=n[a],w[e]}return""}var j=S("animationend"),P=S("transitionend"),N=!(!j||!P),O=j||"animationend",T=P||"transitionend";function M(n,t){return n?"object"===e(n)?n[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(n,"-").concat(t):null}var V="none",D="appear",x="enter",z="leave",F="none",I="prepare",K="start",q="active",H="end",U=v()?l.useLayoutEffect:l.useEffect,W=[I,K,q,H];function _(e){return e===q||e===H}var B=function(e){o(t,e);var n=a(t);function t(){return i(this,t),n.apply(this,arguments)}return u(t,[{key:"render",value:function(){return this.props.children}}]),t}(l.Component);const G=function(o){var a=o;function i(e){return!(!e.motionName||!a)}"object"===e(o)&&(a=o.transitionSupport);var u=l.forwardRef((function(e,o){var a=e.visible,u=void 0===a||a,c=e.removeOnLeave,s=void 0===c||c,f=e.forceRender,v=e.children,k=e.motionName,b=e.leavedClassName,L=e.eventProps,A=i(e),g=l.useRef(),C=l.useRef(),R=function(e,o,a,i){var u=i.motionEnter,c=void 0===u||u,s=i.motionAppear,f=void 0===s||s,v=i.motionLeave,p=void 0===v||v,E=i.motionDeadline,h=i.motionLeaveImmediately,k=i.onAppearPrepare,b=i.onEnterPrepare,L=i.onLeavePrepare,A=i.onAppearStart,R=i.onEnterStart,w=i.onLeaveStart,S=i.onAppearActive,j=i.onEnterActive,P=i.onLeaveActive,N=i.onAppearEnd,M=i.onEnterEnd,B=i.onLeaveEnd,G=i.onVisibleChanged,J=m(),Q=n(J,2),X=Q[0],Y=Q[1],Z=m(V),$=n(Z,2),ee=$[0],ne=$[1],te=m(null),re=n(te,2),oe=re[0],ae=re[1],ie=l.useRef(!1),ue=l.useRef(null);function ce(){return function(){try{return g.current instanceof HTMLElement?g.current:y(C.current)}catch(e){return null}}()}var se=l.useRef(!1);function fe(e){var n=ce();if(!e||e.deadline||e.target===n){var t,r=se.current;ee===D&&r?t=null==N?void 0:N(n,e):ee===x&&r?t=null==M?void 0:M(n,e):ee===z&&r&&(t=null==B?void 0:B(n,e)),ee!==V&&r&&!1!==t&&(ne(V,!0),ae(null,!0))}}var le=function(e){var n=l.useRef(),t=l.useRef(e);t.current=e;var r=l.useCallback((function(e){t.current(e)}),[]);function o(e){e&&(e.removeEventListener(T,r),e.removeEventListener(O,r))}return l.useEffect((function(){return function(){o(n.current)}}),[]),[function(e){n.current&&n.current!==e&&o(n.current),e&&e!==n.current&&(e.addEventListener(T,r),e.addEventListener(O,r),n.current=e)},o]}(fe),ve=n(le,1)[0],de=l.useMemo((function(){var e,n,r;switch(ee){case D:return t(e={},I,k),t(e,K,A),t(e,q,S),e;case x:return t(n={},I,b),t(n,K,R),t(n,q,j),n;case z:return t(r={},I,L),t(r,K,w),t(r,q,P),r;default:return{}}}),[ee]),me=function(e,t){var r=m(F),o=n(r,2),a=o[0],i=o[1],u=function(){var e=l.useRef(null);function n(){d.cancel(e.current)}return l.useEffect((function(){return function(){n()}}),[]),[function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var a=d((function(){o<=1?r({isCanceled:function(){return a!==e.current}}):t(r,o-1)}));e.current=a},n]}(),c=n(u,2),s=c[0],f=c[1];return U((function(){if(a!==F&&a!==H){var e=W.indexOf(a),n=W[e+1],r=t(a);!1===r?i(n,!0):s((function(e){function t(){e.isCanceled()||i(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,a]),l.useEffect((function(){return function(){f()}}),[]),[function(){i(I,!0)},a]}(ee,(function(e){if(e===I){var n=de[I];return!!n&&n(ce())}var t;return ye in de&&ae((null===(t=de[ye])||void 0===t?void 0:t.call(de,ce(),null))||null),ye===q&&(ve(ce()),E>0&&(clearTimeout(ue.current),ue.current=setTimeout((function(){fe({deadline:!0})}),E))),true})),pe=n(me,2),Ee=pe[0],ye=pe[1],he=_(ye);se.current=he,U((function(){Y(o);var n,t=ie.current;ie.current=!0,e&&(!t&&o&&f&&(n=D),t&&o&&c&&(n=x),(t&&!o&&p||!t&&h&&!o&&p)&&(n=z),n&&(ne(n),Ee()))}),[o]),l.useEffect((function(){(ee===D&&!f||ee===x&&!c||ee===z&&!p)&&ne(V)}),[f,c,p]),l.useEffect((function(){return function(){ie.current=!1,clearTimeout(ue.current)}}),[]);var ke=l.useRef(!1);l.useEffect((function(){X&&(ke.current=!0),void 0!==X&&ee===V&&((ke.current||X)&&(null==G||G(X)),ke.current=!0)}),[X,ee]);var be=oe;return de[I]&&ye===K&&(be=r({transition:"none"},be)),[ee,ye,be,null!=X?X:o]}(A,u,0,e),w=n(R,4),S=w[0],j=w[1],P=w[2],N=w[3],G=l.useRef(N);N&&(G.current=!0);var J,Q=l.useCallback((function(e){g.current=e,p(o,e)}),[o]),X=r(r({},L),{},{visible:u});if(v)if(S!==V&&i(e)){var Y,Z;j===I?Z="prepare":_(j)?Z="active":j===K&&(Z="start"),J=v(r(r({},X),{},{className:h(M(k,S),(Y={},t(Y,M(k,"".concat(S,"-").concat(Z)),Z),t(Y,k,"string"==typeof k),Y)),style:P}),Q)}else J=N?v(r({},X),Q):!s&&G.current&&b?v(r(r({},X),{},{className:b}),Q):f||!s&&!b?v(r(r({},X),{},{style:{display:"none"}}),Q):null;else J=null;return l.isValidElement(J)&&E(J)&&(J.ref||(J=l.cloneElement(J,{ref:Q}))),l.createElement(B,{ref:C},J)}));return u.displayName="CSSMotion",u}(N);var J="add",Q="keep",X="remove",Y="removed";function Z(n){var t;return t=n&&"object"===e(n)&&"key"in n?n:{key:n},r(r({},t),{},{key:String(t.key)})}function $(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Z)}var ee=["component","children","onVisibleChanged","onAllRemoved"],ne=["status"],te=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,v=function(e){o(d,e);var v=a(d);function d(){var e;i(this,d);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=v.call.apply(v,[this].concat(o)),t(c(e),"state",{keyEntities:[]}),t(c(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:r(r({},e),{},{status:Y})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==Y})).length})),e}return u(d,[{key:"render",value:function(){var e=this,t=this.state.keyEntities,r=this.props,o=r.component,a=r.children,i=r.onVisibleChanged,u=r.onAllRemoved,c=s(r,ee),v=o||l.Fragment,d={};return te.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,l.createElement(v,c,t.map((function(t){var r=t.status,o=s(t,ne),c=r===J||r===Q;return l.createElement(n,f({},d,{key:o.key,visible:c,eventProps:o,onVisibleChanged:function(n){null==i||i(n,{key:o.key}),n||0===e.removeKey(o.key)&&u&&u()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,o=n.keyEntities,a=$(t),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],o=0,a=n.length,i=$(e),u=$(n);i.forEach((function(e){for(var n=!1,i=o;i<a;i+=1){var c=u[i];if(c.key===e.key){o<i&&(t=t.concat(u.slice(o,i).map((function(e){return r(r({},e),{},{status:J})}))),o=i),t.push(r(r({},c),{},{status:Q})),o+=1,n=!0;break}}n||t.push(r(r({},e),{},{status:X}))})),o<a&&(t=t.concat(u.slice(o).map((function(e){return r(r({},e),{},{status:J})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==X}))).forEach((function(n){n.key===e&&(n.status=Q)}))})),t}(o,a);return{keyEntities:i.filter((function(e){var n=o.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==Y||e.status!==X}))}}}]),d}(l.Component);t(v,"defaultProps",{component:"div"})}(N);export{G as C};
