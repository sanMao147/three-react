import{j as e,a as t}from"./index-ee659f2b.js";import{g as n,S as a,P as i,W as s,A as o,O as r,i as l,j as c,T as d,R as m,V as p,k as w,l as h,m as u,n as v,o as g,b as x,a as y,p as b,q as f,r as z,D as N,s as S,L as j,t as D,u as E,v as P,h as L}from"./three-a0315406.js";import{r as M}from"./react-aa034a1c.js";import"./react-dom-67b4aaa0.js";import"./classnames-46b2866a.js";import"./scheduler-6fdbf8de.js";import"./react-router-dom-824b8f8a.js";import"./react-router-ca90130e.js";import"./@remix-run-f8738e57.js";const q=(e,t,a,i,s=2e3,o)=>{var r=new n.Tween({x1:e.position.x,y1:e.position.y,z1:e.position.z,x2:t.target.x,y2:t.target.y,z2:t.target.z});r.to({x1:a.x,y1:a.y,z1:a.z,x2:i.x,y2:i.y,z2:i.z},s),r.onUpdate((function(n){e.position.x=n.x1,e.position.y=n.y1,e.position.z=n.z1,t.target.x=n.x2,t.target.y=n.y2,t.target.z=n.z2,t.update()})),r.onComplete((function(){t.enabled=!0,o()})),r.easing(n.Easing.Cubic.InOut),r.start()},C=()=>{const[C,A]=M.useState([]),[H,R]=M.useState(!1);let T=M.useRef(null);M.useEffect((()=>{V()}),[]);const V=()=>{const e=new L,t={width:window.innerWidth,height:window.innerHeight},M=new a,H=new i(55,t.width/t.height,1,2e4);H.position.set(0,600,1600),M.add(H);const V=new s({canvas:T.current,antialias:!0});V.setPixelRatio(Math.min(window.devicePixelRatio,2)),V.setSize(t.width,t.height),V.toneMapping=o;const k=new r(H,T.current);k.target.set(0,0,0),k.enableDamping=!0,k.enablePan=!1,k.maxPolarAngle=1.5,k.minDistance=50,k.maxDistance=1200;const U=new l(1e4,1e4),W=new c(U,{textureWidth:512,textureHeight:512,waterNormals:(new d).load("/three-react/static/jpg/waterNormals-add9912b.jpg",(e=>{e.wrapS=e.wrapT=m})),sunDirection:new p,sunColor:16777215,waterColor:29439,distortionScale:4,fog:void 0!==M.fog});W.rotation.x=-Math.PI/2,M.add(W),W.rotation.x=-Math.PI/2,M.add(W);const F=new w;F.scale.setScalar(1e4),M.add(F);const I=F.material.uniforms;I.turbidity.value=20,I.rayleigh.value=2,I.mieCoefficient.value=.005,I.mieDirectionalG.value=.8;const O=new p,$=new h(V),_=u.degToRad(88),G=u.degToRad(180);O.setFromSphericalCoords(1,_,G),F.material.uniforms.sunPosition.value.copy(O),W.material.uniforms.sunDirection.value.copy(O).normalize(),M.environment=$.fromScene(F).texture;const X=new v({side:g,transparent:!0,uniforms:{},vertexShader:"\nvarying vec2 vUV;\nvarying vec3 vNormal;\n\nvoid main () {\n  vUV = uv;\n  vNormal = vec3(normal);\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"varying vec2 vUV;\nvarying vec3 vNormal;\n\nvoid main () {\n  vec4 c = vec4(abs(vNormal) + vec3(vUV, 0.0), 0.1);\n  gl_FragColor = c;\n}"}),Y=new x(200,10,50,100),Z=new y(Y,X);Z.opacity=.1,Z.position.set(0,-50,-400),M.add(Z);const B=new P;B.onProgress=async(e,t,n)=>{100===Math.floor(t/n*100)&&q(H,k,{x:0,y:40,z:140},{x:0,y:0,z:0},4e3,(()=>{R(!0)}))};const J=new b(B);J.load("/three-react/static/glb/island-1ac7a40d.glb",(e=>{e.scene.traverse((e=>{e.isMesh&&(e.material.metalness=.4,e.material.roughness=.6)})),e.scene.position.set(0,-2,0),e.scene.scale.set(33,33,33),M.add(e.scene)})),J.load("/three-react/static/glb/flamingo-9eabeb58.glb",(e=>{const t=e.scene.children[0];t.scale.set(.35,.35,.35),t.position.set(-100,80,-300),t.rotation.y=-1,t.castShadow=!0,M.add(t);const n=t.clone();n.position.set(150,80,-500),M.add(n);const a=new f(t);a.clipAction(e.animations[0]).setDuration(1.2).play(),A([...C,a]);const i=new f(n);i.clipAction(e.animations[0]).setDuration(1.8).play(),A([...C,i])}));const K=new z(16777215,.8);M.add(K);const Q=new N(16777215,1);Q.color.setHSL(.1,1,.95),Q.position.set(-1,1.75,1),Q.position.multiplyScalar(30),M.add(Q);const ee=new S(16777215,1.2,2e3);ee.color.setHSL(.995,.5,.9),ee.position.set(0,45,-2e3);const te=new d,ne=te.load("/three-react/static/png/lensflare0-cc6aae5d.png"),ae=te.load("/three-react/static/png/lensflare1-b777765d.png"),ie=new j;ie.addElement(new D(ne,600,0,ee.color)),ie.addElement(new D(ae,60,.6)),ie.addElement(new D(ae,70,.7)),ie.addElement(new D(ae,120,.9)),ie.addElement(new D(ae,70,1)),ee.add(ie),M.add(ee);const se=new E,oe=[{position:new p(10,46,0),element:document.querySelector(".point-0")},{position:new p(-10,8,24),element:document.querySelector(".point-1")},{position:new p(30,10,70),element:document.querySelector(".point-2")},{position:new p(-100,50,-300),element:document.querySelector(".point-3")},{position:new p(-120,50,-100),element:document.querySelector(".point-4")}];document.querySelectorAll(".point").forEach((e=>{e.addEventListener("click",(e=>{switch(e.target.classList[e.target.classList.length-1]){case"label-0":q(H,k,{x:-15,y:80,z:60},{x:0,y:0,z:0},1600,(()=>{}));break;case"label-1":q(H,k,{x:-20,y:10,z:60},{x:0,y:0,z:0},1600,(()=>{}));break;case"label-2":q(H,k,{x:30,y:10,z:100},{x:0,y:0,z:0},1600,(()=>{}));break;default:q(H,k,{x:0,y:40,z:140},{x:0,y:0,z:0},1600,(()=>{}))}}),!1)})),window.addEventListener("resize",(()=>{H.aspect=window.innerWidth/window.innerHeight,H.updateProjectionMatrix(),V.setSize(window.innerWidth,window.innerHeight)}),!1);const re=()=>{W.material.uniforms.time.value+=1/60,k&&k.update();const a=e.getDelta();C&&C.forEach((e=>{e.update(a)}));const i=5e-4*Date.now();n&&n.update(),H&&(H.position.y+=.05*Math.sin(i));for(const e of oe){const n=e.position.clone();n.project(H),se.setFromCamera(n,H);const a=se.intersectObjects(M.children,!0);0===a.length?e.element.classList.add("visible"):a[0].distance<e.position.distanceTo(H.position)?e.element.classList.remove("visible"):e.element.classList.add("visible");const i=n.x*t.width*.5,s=-n.y*t.height*.5;e.element.style.transform=`translateX(${i}px) translateY(${s}px)`}V.render(M,H),requestAnimationFrame(re)};re()};return e("div",{className:"ocean",children:[t("canvas",{ref:T}),e("div",{className:"point point-0",children:[t("div",{className:"label label-0",children:"1"}),t("div",{className:"text",children:"灯塔"})]}),e("div",{className:"point point-1",children:[t("div",{className:"label label-1",children:"2"}),t("div",{className:"text",children:"小船"})]}),e("div",{className:"point point-2",children:[t("div",{className:"label label-2",children:"3"}),t("div",{className:"text",children:"沙滩"})]}),e("div",{className:"point point-3",children:[t("div",{className:"label label-3",children:"4"}),t("div",{className:"text",children:"飞鸟"})]}),e("div",{className:"point point-4",children:[t("div",{className:"label label-4",children:"5"}),t("div",{className:"text",children:"礁石"})]})]})};export{C as default};
